Junit
-----
### Introduction
This recipe demonstrates some test strategies for junit4 and junit5 using bazel.  There are two 
goals:
* running the tests in Intellij IDEA 
* running the tests from a container and generating a junit XML report

### Solution:

Uses rules_jvm_external for all java deps.
  
#### Junit4
* Using java_test 

    ```//junit-in-container/src/test/java/junitcontainer/junit4:junit4container ```

* Running from a main method

    ```//junit-in-container/src/test/java/junitcontainer/junit4:junit4container_main```
    
    The complication with junit4 is that the XML junit report is not generated by junit by the
     caller, for example apache ant/maven.  This uses code from [cloudbees](https://github.com/cloudbees/junit-standalone-runner)
     based on the suggestion from [ttddyy](http://ttddyy.github.io/generate-junit-xml-report-from-junitcore/).

* Running in a container, using the junit5 console launcher

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container_launcher_image```
    
    Thie recipe demonstrates running the junit5 console launcher running a junit4 test using the
     junit5 vontage test engine. 
      
#### Junit5
* Using java_junit5_test

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container_with_macro```
    
    The junit team has created a [starter](https://github.com/junit-team/junit5-samples/blob/main/junit5-jupiter-starter-bazel/junit5.bzl)
     and flexport have created a [patch]( https://flexport.engineering/connecting-bazel-and-junit5-by-transforming-arguments-46440c6ea068) 
     to fix the integration of bazel with IntelliJ IDEA.

    I modified the macro so that it is less magic - deps need to be specified explicitly.
    I modified the flexport code to use rules_jvm_external. 
             
* Using java_test

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container```
    As pointed out on the junit [github issue](https://github.com/bazelbuild/bazel/issues/6681), it
    is not necessary to use the macro at all.
    
* Running from a main method

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container_main``` 
     
     Junit5 can generate a Junit XML report without other dependencies programmatically.

* Running in a container

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container_image``` 
     
* Running in a container, using the junit console launcher

    ```//junit-in-container/src/test/java/junitcontainer/junit5:junit5container_launcher_image``` 
